<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Ulefone | Navigation</title>
<link rel="icon" href="https://wangwenzhi.eu.org/images/ulefone-logo/icon.png" sizes="32x32" type="image/png"/>
<style>
:root {
  --bg: #fff;
  --fg: #181818;
  --muted: #bcbcbc;
  --border: #e6e6e6;
  --accent: #181818;
  --radius: 20px;
  --shadow: 0 1px 8px 0 rgba(24,24,24,0.02);
  --header-height: 56px;
  --sidebar-width: 210px;
  --card-bg: #f7f7f7;
}
body {
  margin: 0;
  background: var(--bg);
  color: var(--fg);
  font-family: 'Inter', 'Segoe UI', 'PingFang SC', Arial, sans-serif;
  font-size: 15px;
  transition: background .18s, color .18s;
  min-height: 100vh;
}
body.dark-mode {
  --bg: #181818;
  --fg: #f2f2f2;
  --muted: #888;
  --border: #2e2e2e;
  --accent: #fff;
  --card-bg: #232323;
}
* {box-sizing: border-box;}
a {color: inherit; text-decoration: none;}
a:active, a:focus, a:hover {color: var(--accent);}
.header {
  height: var(--header-height);
  background: var(--bg);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 32px 0 32px;
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 100;
  box-shadow: none;
  transition: background .18s, color .18s, border-color .18s;
}
.logo-container {display: flex; align-items: center;}
.logo {
  height: 38px; 
  width: auto; 
  min-width: 130px;
  max-width: 200px;
  display: flex; align-items: center; justify-content: flex-start;
  border-radius: var(--radius);
  overflow: hidden;
  cursor: pointer;
}

.logo img {
  height: 100%; 
  width: auto; 
  object-fit: contain;
  display: block;
}
.header-controls {
  display: flex; align-items: center; gap: 18px;
}
.search-input {
  border: none;
  outline: none;
  background: #ededed;
  padding: 8px 14px;
  border-radius: var(--radius);
  font-size: 14px;
  color: var(--fg);
  width: 120px;
  transition: background .16s;
}
body.dark-mode .search-input {background: #232323;}
.search-input:focus {background: #e0e0e0;}
.dark-btn, .admin-link {
  background: none;
  border: none;
  color: var(--fg);
  padding: 0;
  font-size: 18px;
  width: 36px; height: 36px;
  border-radius: var(--radius);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer;
  transition: background .16s;
}
.admin-link {font-size: 16px;}
.dark-btn:hover, .admin-link:hover {background: #ededed; color: var(--accent);}
body.dark-mode .dark-btn:hover, body.dark-mode .admin-link:hover {background: #232323;}
.menu-toggle {
  display: none;
  background: none;
  border: none;
  color: var(--fg);
  font-size: 22px;
  width: 36px; height: 36px;
  border-radius: var(--radius);
  align-items: center; justify-content: center;
  cursor: pointer;
}
@media (max-width: 700px) {.menu-toggle {display: flex;}}

.sidebar {
  width: var(--sidebar-width);
  background: var(--bg);
  border-right: 1px solid var(--border);
  padding: 36px 0 0 0;
  position: fixed;
  left: 0; top: var(--header-height); bottom: 0;
  height: calc(100vh - var(--header-height));
  z-index: 10;
  display: flex; flex-direction: column;
  align-items: flex-start;
  transition: background .18s, border-color .18s;
}
#category-list {
  width: 100%;
  display: flex; flex-direction: column;
  padding: 0 10px;
  margin: 0;
  list-style: none;
  gap: 6px;
}
#category-list li {
  width: 100%;
  font-size: 15px;
  color: var(--fg);
  background: none;
  border: none;
  display: flex; align-items: center; justify-content: flex-start;
  padding: 11px 0 11px 18px;
  margin: 0;
  border-radius: var(--radius);
  cursor: pointer;
  transition: background .13s, color .13s;
  user-select: none;
  font-weight: 500;
  letter-spacing: 0.01em;
  box-sizing: border-box;
}
#category-list li .category-icon {
  margin-right: 10px; font-size: 15px; color: #505050; width: 22px; display: flex; align-items: center; justify-content: center;
}
#category-list li.active, #category-list li:hover {
  background: #ededed;
  color: var(--fg);
}
body.dark-mode #category-list li.active,
body.dark-mode #category-list li:hover {
  background: #232323;
  color: var(--fg);
}
.sidebar-sep {
  width: 85%;
  height: 1px;
  background: var(--border);
  margin: 12px auto 4px auto;
  border: none;
  border-radius: var(--radius);
  display: block;
}
.main {
  margin-left: var(--sidebar-width);
  flex: 1;
  background: var(--bg);
  padding: calc(var(--header-height) + 32px) 32px 18px 32px;
  display: flex; flex-direction: column; gap: 20px;
  min-width: 0;
  transition: padding .13s, background .18s;
  scroll-behavior: smooth;
}
@media (max-width: 700px) {
  .sidebar {display: none;}
  .main {margin-left: 0; padding: calc(var(--header-height) + 10px) 2vw 10px 2vw;}
  .header {padding: 0 10px;}
  .logo {height: 30px; min-width: 70px;}
}
.section {margin-bottom: 8px;}
.section-header {
  display: flex; align-items: center; gap: 13px;
  font-size: 16px;
  font-weight: 500;
  color: var(--fg);
  margin-bottom: 10px;
  position: relative;
  cursor: pointer;
  outline: none;
}
.section-icon {
  width: 28px; height: 28px; background: #ededed; border-radius: var(--radius);
  display: flex; align-items: center; justify-content: center;
  color: #000000; font-size: 15px;
  transition: background .18s, color .18s;
}
body.dark-mode .section-icon {background: #232323; color: #888;}
.section h2 {font-size: 16px; margin: 0; position: relative;}

/* 分类提示小字样式 */
.section-tip {
  display: none;
  position: absolute;
  left: 100%;
  top: 50%;
  transform: translateY(-50%);
  white-space: nowrap;
  font-size: 12px;
  color: var(--muted);
  background: var(--bg);
  border-radius: var(--radius);
  padding: 2px 10px 2px 10px;
  margin-left: 10px;
  z-index: 10;
  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.04);
  pointer-events: none;
}
.section-header .section-tip {
  pointer-events: none;
}

.section-header.show-tip .section-tip,
.section-header:focus .section-tip,
.section-header:hover .section-tip {
  display: block;
}

.cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(188px, 1fr));
  gap: 13px;
}
.card {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px 12px 10px 12px;
  display: flex; flex-direction: column;
  box-shadow: var(--shadow);
  transition: background .18s, box-shadow .13s;
  cursor: pointer;
  min-width: 0;
  /* 去除hover时的outline效果，只保留变深背景 */
}
body.dark-mode .card {background: #232323; border-color: #232323;}
.card:hover {
  background: #e0e0e0;
  border-color: var(--border);
  box-shadow: none;
}
body.dark-mode .card:hover {
  background: #383838; /* 或 #282828，#303030，看你喜欢 */
  border-color: #232323;
  box-shadow: none;
}
.card-header {
  display: flex; align-items: center; gap: 12px; margin-bottom: 7px;
}
.card-icon {
  width: 32px; height: 32px; border-radius: var(--radius);
  background: #fff;
  display: flex; align-items: center; justify-content: center;
  overflow: hidden;
  flex-shrink: 0;
}
body.dark-mode .card-icon {background: #232323;}
.card-icon img {
  width: 90%; height: 90%; object-fit: contain; border-radius: var(--radius); background: #fff;
  display: block;
}
.card-title {
  font-size: 13px;
  color: var(--fg);
  font-weight: 680;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  letter-spacing: 0.01em;
  flex: 1;
}
.card-url {
  font-size: 10px;
  color: var(--muted);
  margin-top: 1px;
  padding-left: 5px; 
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.welcome-section {
  background: var(--card-bg);
  border-radius: var(--radius);
  padding: 15px 18px;
  display: flex; flex-direction: column; gap: 13px;
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  font-size: 15px;
  transition: background .18s, border .18s;
}
body.dark-mode .welcome-section {background: #232323; border-color: #232323;}
.welcome-title {font-size: 20px; font-weight: 700; color: var(--fg);}
.welcome-text {color: var(--muted);}
.stats-container {
  display: flex; gap: 11px; flex-wrap: wrap;
}
.stat-card {
  background: #ededed; border-radius: var(--radius); padding: 10px 12px; min-width: 80px;max-width: 200px; flex: 0.5;
  border: 1px solid #e6e6e6;
  font-size: 13px;
  display: flex; flex-direction: column; align-items: flex-start;
  transition: background .18s, border .18s;
}
body.dark-mode .stat-card {background: #232323; border-color: #232323;}
.stat-value {
  font-size: 16px; 
  font-weight: 700; 
  color: var(--fg);
}
.stat-label {font-size: 12px; color: var(--muted);}
.footer {
  background: var(--bg);
  color: #b7b7b7;
  text-align: center;
  font-size: 12px;
  padding: 12px 0 3px 0;
  border-top: 1px solid var(--border);
  margin-top: auto;
  transition: background .18s, color .18s, border-color .18s;
}
.overlay {display: none;}
.category-modal {display: none;}
@media (max-width: 480px) {
  .main {padding: calc(var(--header-height) + 5px) 1vw 5px 1vw;}
  .cards {gap: 8px;}
  .card {padding: 8px 6px 7px 6px;}
  .card-header {gap: 7px;}
  .card-title {font-size: 14px;}
  .welcome-section {padding: 10px 4vw;}
  .welcome-title {font-size: 16px;}
}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>
<div class="header">
  <div class="logo-container">
    <button class="menu-toggle" id="menuToggle" style="display:none"><i class="fas fa-bars"></i></button>
    <div class="logo" id="logoBtn">
      <img alt="Logo" id="site-logo" src="https://wangwenzhi.eu.org/images/ulefone-logo/logo.png"/>
    </div>
  </div>
  <div class="header-controls">
    <input class="search-input" id="search" placeholder="搜索..." type="text"/>
    <a class="admin-link" href="admin.html"><i class="fas fa-cog"></i></a>
  </div>
</div>
<div class="container">
  <nav class="sidebar" id="sidebar">
    <ul id="category-list"></ul>
  </nav>
  <main class="main" id="bookmark-container">
    <div class="welcome-section" id="top">
      <div class="welcome-title">
        <a href="https://github.com/wangwenzhiwwz/Ulefone-Navigation/upload/main" target="_blank" rel="noopener noreferrer">
          Ulefone Navigation
        </a>
      </div>
      <div class="welcome-text">极简书签导航，专注内容，便捷高效。</div>
      <div class="stats-container">
        <div class="stat-card"><div class="stat-value">--</div><div class="stat-label">书签</div></div>
        <div class="stat-card"><div class="stat-value">--</div><div class="stat-label">分类</div></div>
        <div class="stat-card">
          <div class="stat-value">
            <img src="https://hitscounter.dev/api/hit?url=https%3A%2F%2Fwww.ulefone.gq%2F&color=%23ededed" alt="Visitor Counter">
          </div>
          <div class="stat-label">访问量</div>
        </div>
      </div>
    </div>
  </main>
</div>
<div class="footer">
  <div>书签导航 © 2023-2025</div>
</div>
<script src="data.js"></script>
<script>
// 生成单个卡片
function createCard(item) {
  const domain = new URL(item.url).hostname;
  return `<a class="card" href="${item.url}" target="_blank">
    <div class="card-header">
      <div class="card-icon">
        <img src="https://www.google.com/s2/favicons?sz=64&domain=${domain}" alt="${item.name}">
      </div>
      <div class="card-title" title="${item.name}">${item.name}</div>
    </div>
    <div class="card-url">${domain}</div>
  </a>`;
}
// 渲染侧边栏
function renderSidebar(dataObj) {
  const ul = document.getElementById("category-list");
  ul.innerHTML = '';
  const allLi = document.createElement('li');
  allLi.classList.add('active');
  allLi.innerHTML = `<span class="category-icon"><i class="fas fa-home"></i></span>全部`;
  allLi.id = "allCategoryBtn";
  ul.appendChild(allLi);
  Object.keys(dataObj).forEach(key => {
    const li = document.createElement('li');
    li.innerHTML = `<span class="category-icon"><i class="fas fa-folder"></i></span>${getCategoryName(key)}`;
    ul.appendChild(li);
  });
}
// 渲染分区
function renderSections(dataObj) {
  const container = document.getElementById("bookmark-container");
  container.querySelectorAll(".section").forEach(sec => sec.remove());
  Object.keys(dataObj).forEach((category, idx) => {
    const section = document.createElement("div");
    section.className = "section";
    section.innerHTML = `
      <div class="section-header" data-category="${category}" tabindex="0">
        <span class="section-icon"><i class="fas fa-folder"></i></span>
        <h2>${getCategoryName(category)}<span class="section-tip">点击打开全部</span></h2>
      </div>
      <div class="cards">
        ${dataObj[category].map(createCard).join('')}
      </div>
    `;
    container.appendChild(section);
  });
  enableSectionHeaderTips();
  enableSectionHeaderClick(dataObj);
}
function enableSectionHeaderTips() {
  // 移动端（触摸）专用：触摸时显示tips，离开时隐藏
  document.querySelectorAll('.section-header').forEach(header => {
    let tip = header.querySelector('.section-tip');
    if (!tip) return;
    // 触摸时显示
    header.addEventListener("touchstart", function() {
      header.classList.add('show-tip');
    });
    // 触摸结束时隐藏
    header.addEventListener("touchend", function() {
      header.classList.remove('show-tip');
    });
    // 触摸移出时隐藏（有些设备需要）
    header.addEventListener("touchcancel", function() {
      header.classList.remove('show-tip');
    });
  });
}
function enableCategoryFiltering(dataObj) {
  const lis = document.querySelectorAll('#category-list li');
  const container = document.getElementById("bookmark-container");
  lis.forEach((li, index) => {
    li.addEventListener('click', () => {
      lis.forEach(i => i.classList.remove('active'));
      li.classList.add('active');
      container.querySelectorAll(".section").forEach(sec => sec.remove());
      if (index === 0) {
        renderSections(dataObj);
        window.scrollTo({top: 0, behavior: 'auto'});
        location.reload();
      } else {
        const key = Object.keys(dataObj)[index - 1];
        renderSections({ [key]: dataObj[key] });
      }
    });
  });
}
// 替换原来的 enableSectionHeaderDblClick 为点击事件
function enableSectionHeaderClick(dataObj) {
  document.querySelectorAll('.section-header').forEach(header => {
    header.addEventListener('click', function(e) {
      // 避免回车键等重复触发
      if (e.detail === 0) return;
      e.preventDefault();
      const category = this.getAttribute('data-category');
      if (dataObj[category]) {
        dataObj[category].forEach(b => window.open(b.url, '_blank'));
      }
    });
    // 回车键也可触发（无障碍）
    header.addEventListener('keydown', function(e){
      if (e.key === "Enter") {
        const category = this.getAttribute('data-category');
        if (dataObj[category]) {
          dataObj[category].forEach(b => window.open(b.url, '_blank'));
        }
      }
    });
  });
}
// 切换logo图片（暗黑/明亮模式）
function updateLogoForDarkMode(isDark) {
  const logoImg = document.getElementById('site-logo');
  if (!logoImg) return;
  logoImg.src = isDark
    ? "https://wangwenzhi.eu.org/images/ulefone-logo/logo-white.png"
    : "https://wangwenzhi.eu.org/images/ulefone-logo/logo.png";
}
function loadDarkMode() {
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  document.body.classList.toggle('dark-mode', prefersDark);
  updateLogoForDarkMode(prefersDark);
}
document.addEventListener('DOMContentLoaded', () => {
  loadDarkMode();
  renderSidebar(data);
  renderSections(data);
  updateStats(data);
  enableCategoryFiltering(data);
  document.getElementById('logoBtn').addEventListener('click', function() {
    window.scrollTo({top: 0, behavior: 'auto'});
    location.reload();
  });
  document.getElementById('search').addEventListener('input', filterBookmarks);
  // 响应式菜单
  const menuToggle = document.getElementById('menuToggle');
  const sidebar = document.getElementById('sidebar');
  menuToggle && menuToggle.addEventListener('click', () => {
    if (sidebar.style.display === "block") {
      sidebar.style.display = "";
    } else {
      sidebar.style.display = "block";
    }
  });

  // 监听系统深色切换自动切换主题
  if (window.matchMedia) {
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
  document.body.classList.toggle('dark-mode', e.matches);
  updateLogoForDarkMode(e.matches);
});
  }
});
function getCategoryName(key) {
  const map = {
    "ulefone": "Ulefone",
    "work": "Work",
    "effects": "Effects",
    "video": "Video",
    "images": "Images",
    "3d": "3D",
    "music": "Music",
    "font": "Font"
  };
  return map[key.toLowerCase()] || key;
}
function updateStats(dataObj) {
  const total = Object.values(dataObj).flat().length;
  const categories = Object.keys(dataObj).length;
  const stats = document.querySelectorAll('.stat-value');
  if (stats.length >= 2) {
    stats[0].textContent = total;
    stats[1].textContent = categories;
  }
}
function filterBookmarks() {
  const query = this.value.toLowerCase();
  const cards = document.querySelectorAll('.card');
  cards.forEach(card => {
    const title = card.querySelector('.card-title').textContent.toLowerCase();
    const url = card.querySelector('.card-url').textContent.toLowerCase();
    card.style.display = (title.includes(query) || url.includes(query)) ? 'flex' : 'none';
  });
}
</script>
</body>
</html>
